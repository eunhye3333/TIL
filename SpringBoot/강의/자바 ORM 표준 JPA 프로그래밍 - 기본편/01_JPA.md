# JPA 소개
## SQL 중심적인 개발의 문제점
+ 무한 반복, 지루한 코드 (자바 객체 → SQL, SQL → 자바 객체)
+ 패러다임의 불일치 (관계형 DB와 객체지향의 목표가 다름)  
  객체와 관계형 데이터베이스의 차이  
  1. 상속
  2. 연관관계 
  3. 데이터 타입
  4. 데이터 식별 방법
+ 엔티티 신뢰에 대한 문제 발생 (물리적으로는 나누어져 있어도 논리적으로는 합쳐져 있음) → 진정한 의미의 계층 분할이 어려움  
<br>

## JPA 소개
### JPA (Java Persistence API)
자바 진영의 ORM 기술 표준으로 애플리케이션과 JDBC 사이에서 동작  
패러다임의 불일치 해결  
JPA는 인터페이스의 모음  

### ORM
Object-relational mapping : 객체는 객체대로 설계하고 관계형 데이터베이스는 관계형 데이터베이스대로 설계하면 ORM 프레임워크가 중간에서 매핑  

### JPA를 왜 사용해야 하는가?
+ SQL 중심적인 개발에서 객체 중심으로 개발
+ 생산성 : 자바 컬렉션에 데이터를 넣었다 뺐다 하는 것처럼 DB CRUD를 구현 가능
+ 유지보수 : 필드만 추가하면 쿼리를 일일이 수정하지 않아도 됨
+ 관계형 DB와 객체지향의 패러다임의 불일치 해결  
  + 상속인 경우에 알아서 쿼리를 두 개 만들어 각각 insert 해줌
  + 자유로운 객체 그래프 탐색 (지연 로딩 기능)
  + 동일한 트랜잭션에서 조회한 엔티티는 같음을 보장

### JPA의 성능 최적화 기능
JPA가 중간 계층이기 때문에 지원해줌
+ 1차 캐시와 동일성 보장
  + 같은 트랜잭션 안에서는 같은 엔티티를 반환 (캐시) - 조회 성능 향상
  + DB Isolation Level이 Read Commit이어도 애플리케이션에서 Repeatzble Read 보장
+ 트랜잭션을 지원하는 쓰기 지연
  + 트랜잭션을 커밋할 때까지 INSERT SQL을 모음
  + JDBC BATCH SQL 기능을 사용해서 한 번에 SQL 전송 (원래 해당 시능을 사용하면 복잡한 코드를 사용하여야 하는데 JPA에서는 옵션 변경으로 가능)
+ 지연 로딩 (JPA에서는 옵션으로 설정 가능)
  + 지연 로딩 : 객체가 실제 사용될 때 로딩 (미리 가지고 오지 않음)
  + 즉시 로딩 : JOIN SQL로 한 번에 연관된 객체까지 미리 조회 (지연 로딩을 사용하면 쿼리가 두 번 나가는 단점이 있기 때문에 무조건 같이 사용되는 객체의 경우 즉시 로딩으로 무조건 한 번에 가지고 오도록 함)





