# 네트워크의 이해

# 3.1 네트워크 기초

## 3.1.1 네트워크 개요와 통신망의 종류

### 네트워크란?

컴퓨터를 상호 연결하여 정보 교환 및 처리, 자료 및 하드웨어 공유 등을 위해 구성한 통신망

<br>

### LAN(Local Area Network)

가까운 지역을 네트워크 매체를 이용하여 하나로 묶는 근거리 통신망

현재는 이더넷을 주로 사용하고 무선 랜도 보편적으로 사용

홈 네트워크 기술로는 전화선을 이용하여 2대 이상의 컴퓨터를 서로 공유할 수 있는 HomePNA 방식과 전력선을 이용해서 통신하는 PLC(Power Line Communication)이 있음

LAN 구성 방식

- Star형

  중앙에 위치한 컴퓨터가 각각의 컴퓨터와 통신하는 방식

  중앙의 제어기를 중심으로 모든 기기는 Point-to-Point 방식으로 연결

  고속의 대규모 네트워크에 이용, 일부 장애가 발갱해도 전체 네트워크에 영향을 주지 않음, 단말기 추가나 오류 진단 용이

  중앙 컴퓨터 고장 시 전체 네트워크가 중단되고 회선 수가 증가하면 제어가 복잡

- Bus형

  하나의 통신 회성네 여러 컴퓨터를 연결해서 전송하는 방식

  한 번에 한 컴퓨터만 전송할 수 있어 연결된 컴퓨터의 수에 따라 네트워크 성능이 좌우됨

  신호 반사에 의한 상호 간섭을 막기 위해 종단에는 종단기 존재

  단말기의 추가 및 제거가 용이하나 장애 발생 시 위치 추적이 어렵고 버스의 연결 부위나 종단 장치에 문제 발생 시 전체 네트워크가 중단됨

  전송 방식: CSMA/CD, 토큰 패싱

- Ring형

  원형의 통신 회선에 컴퓨터와 단말기를 연결하는 형태로 연결된 앞의 컴퓨터로부터 수신한 내용을 다음 컴퓨터에 재전송하는 방법으로 동작

  토큰 패싱을 통해 데이터 전송

  네트워크 전송상의 충돌이 없고 노드의 숫자가 늘더라도 전체적인 성능의 저하가 적음

  노드의 추가가 어렵고 노드에 문제가 발생했을 경우 전체 네트워크 중단 가능

- Mesh형

  star형과 ring형의 혼합된 형태로 각 네트워크 장비가 여러 개의 인터페이스를 갖추고 상호간에 그물 형태로 연결하는 방식

  설치 비용이 많이 들어 LAN을 구성할 때보다 LAN과 LAN을 연결하거나 백본망을 구성할 때 주로 사용됨

  장애 발생 시에도 다른 시스템에 영향이 적고 우회할 수 있는 방법이 존재해 신뢰성이 높음

  운영이 어렵고 장애 발생 시 고장 지점을 찾기 어려움

<br>

### LAN 전송 방식

- 이더넷(Ethernet)과 CSMA/CD(Carrier Sense Multiple Access with Collision Detection)

  이더넷은 각 기기들이 48비트 길이의 고유한 MAC(Media Access Control) 주소를 기반으로 상호간에 데이터를 주고받을 수 있도록 만들어짐

  전송 매체: BNC, UTP, STP 케이블

  기기 연결 매체: 허브, 스위치, 리피터 등

  CSMA/CD: 이더넷이 이용하는 방식으로 단말기가 전송로의 신호유무를 조사하고 다른 단말기가 신호를 송출하고 있는지 확인

- Token Ring

  IBM에 의해 개발된 LAN 기술로 IEEE 802.5로 표준화됨

  여러 스테이션을 하나의 링에 이어서 형성하고 데이터는 한쪽 방향으로 흐르게 함

  데이터 전송을 위한 네트워크 채널을 사용하려면 토큰을 획득해야 함

  전송 속도: 4MB ~ 16MB

  전송 매체: 동축케이블, 광케이블 등

- FDDI(Fiber Distributed Data Interface)

  광섬유 케이블을 전송매체로 사용하여 설계된 링 구조의 통신망으로 네크워크 엑세스를 제어하기 위해 토큰 패싱 방법 사용

  광대한 지역의 LAN이나 고속 백본 LAN 구성에 주로 사용

<br>

### MAN(Metropolitan Area Network)

LAN과 WAN의 중간 형태로 위성 도시 등을 연결한 도시권 통신망

LAN보다 장거리이고 고속이며 음성과 데이터 모두 전송 가능

MAN을 위한 국제 표준안에는 DQDB(Distrinuted Queue Dual Bus)가 IEEE 802.6으로 규정되어 있음

<br>

### WAN(Wide Area Network)

국가, 대륙 등과 같은 넓은 지역을 연결하는 네트워크로 원거리 통신망

거리상 제약이 없지만 LAN보다 속도가 느리고 전송 에러율도 높음

WAN 구성 방법

- 전용 회선 방식

  회선 제공자가 계약을 체결한 송수신 사용자들끼리만 전용 통신 선로로 연결하여 데이터를 교환하는 방식으로 안전성은 우수하나 비용이 높음

- 교환 회선 방식

  공중교환전화망이나 공중교환데이터망 같은 공중망을 이용해 전송하는 방식

  전용 회선 방식에 비해 비용이 저렴하짐나 데이터 속도가 상대적으로 느림

  - 회선 교환 방식(Circuit Switching)

    송신 호스트와 수신 호스트가 데이터 전송 전 연결 경로를 설정하여 일종의 물리적 전용선을 연결하는 방식

    모든 데이터는 같은 경로로 전달, 고정된 대역폭을 할당받아 전송되고 안정적인 데이터 전송률 지원

    해당 회선 사용 중에는 다른 사람이 이용 불가능

  - 패킷 교환 방식(Packet Switching)

    패킷이라는 정보 블록을 이용해 전송하는 방식(패킷: 정보를 일정 크기로 분할하고 각각에 관련 정보를 추가하여 만든 블록)

    전송 대역폭을 동적인 방싣으로 공유하기 때문에 전송 선로의 이용 효율 극대화 가능

    고정 대역을 할당하지 않기 때문에 호스트의 무제한 수용이 가능하고 패킷별로 우선 순위 부여 가능

    회선 교환 방식에 비해 많은 지연 발생 가능

    - 데이터그램 방식: 비연결형 서비스를 이용해 전달되는 패킷들이 독립적으로 전송
    - 가상 회선 방식: 연결형 서비스를 지원하기 위한 기능으로 송수신 호스트 사이에 설정된 가상의 단일 파이프를 통해 패킷 송수신

관련 프로토콜

- X.25: 패킷망에서 DCE와 DTE 사이에 이루어지는 상호작용을 규정한 프로토콜
- 프레임 릴레이: LAN 또는 WAN 상에서 단말 지점 간의 효율적인 데이터 전송을 위해 고안된 방법으로 패킷 대신 프레임이라고 불리는 가변 길이 단위에 데이터를 넣고 재전송과 같은 오류 정정 기능은 단말 지점에 맡기는 방식
- 셀 릴레이(ATM): 고정 길이 패킷인 cell을 이용하여 순서대로 자료를 전송하는 방식

<br>

## 3.1.2 네트워크 장비

### LAN 구성 장비

- 네트워크 카드: 네트워크 안에서 컴퓨터끼리 통신하는데 쓰이는 하드웨어(= 네트워크 어댑터, 네트워크 인터페이스 카드, 이더넷 카드, 랜 카드)
- 케이블: 신호를 전송하는 물리적 전송 매체로 이더넷을 구성하는 케이블에는 BNC, UTP, 광섬유 등이 있음
- 허브: 여러 대의 컴퓨터 및 네트워크 장비를 연결하는 장치, 하나의 허브를 중심으로 여러 대의 컴퓨터와 네트워크 장비가 별모양으로 서로 연결되며 같은 허브에 연결된 컴퓨터와 네트워크 장비는 상호 간에 통신 가능

<br>

### 인터네트워킹 장비

인터네트워킹: 네트워크와 네트워크의 연결

게이트웨이: 인터네트워킹을 수행하는 장치로 서로 다른 통신망과 프로토콜을 사용하는 네트워크 간에 통신을 가능하게 해줌

- 리피터: 입력된 신호를 증폭하여 중계하는 장치
- 브리지: OSI 모델의 데이터 링크 계층에 있는 여러 개의 네트워크 세그먼트를 연결
- 라우터: 브리지 기능에 추가하여 네트워크 계층에 대한 경로 선택 기능 제공, 임의의 네트워크에 들어온 데이터를 어느 네트워크로 전달할지 판단
- 게이트웨이: 서로 다른 네트워크 간을 연결하여 통신이 가능하게 해주는 장치, 서로 다른 프로토콜을 사용하는 통신망도 접속할 수 있도록 해주기 때문에 프로토콜 변환기라고도 함

<br>

## 3.1.3 프로토콜(Protocol)

### 프로토콜의 개요

프로토콜: 컴퓨터 상호 간에 통신을 위해 미리 정해 놓은 통신 규칙이자 통신 규약(상호 간 접속, 전달 방식, 코드 변환 방식 등에 대해 정함)

프로토콜의 기본 구성 요소

- 구문: 데이터의 구조나 형식을 말하는 것으로 부호화, 신호 레벨 등을 규정
- 의미: 전송의 조작이나 오류 제어를 위한 제어 정보에 대한 규정
- 순서: 접속되어 있는 개체 간의 통신 속도의 조정이나 메시지의 순서 제어

<br>

### 프로토콜의 기능

- 주소 지정
- 순서 지정: 흐름 제어 및 오류 제어
- 단편화와 재조합
- 흐름 제어: 송신 속도가 수신측의 데이터 처리 능력을 초과하지 않도록 함
- 오류 제어: checksum
- 연결 제어
- 동기화
- 멀티플렉싱
- 전송 서비스
- 캡슐화

<br>

### 프로토콜 제정 기관

- ISO
- IEEE
- ANSI
- EIA
- ITU-T

<br>

### TCP/IP

TCP/IP: 컴퓨터 기종에 관계없이 정보 교환이 가능하게 해 주는 통신 프로토콜

TCP: IP 프로토콜에 의해 만들어진 패킷들의 전송 흐름 부분 담당, 패킷이 목적지 주소에 올바른 순서로 도달하도록 제어하고 중간에 유실되지 않도록 함

IP: 전송하려는 자료를 패킷으로 나누고 목적지 주소를 지정한 뒤 운반

TCP/IP의 구조

- 네트워크 인터페이스 계층: 이더넷 카드 등을 연결된 물리적 네트워크를 의미하며 프레임을 물리적인 회선에 올리거나 내려받는 역할

  이더넷, 토큰링, FDDI 등

- 인터넷 계층: 전송 계층에서 받은 패킷을 목적지까지 효율적으로 전달하는 역할

  - IP: 호스트의 주소 지정과 패킷 분할 및 조립 기능 담당, 데이터 세그먼트를 패킷으로 만들어 전송하는 역할 수행, 비신뢰성, 비연결형
  - ICMP: 메시지에 대한 오류 보고와 이에 대한 피드백을 원래 호스트에 보고하는 역할 (ping 명령)
  - ARP: 동적으로 특정 프로토콜에 의해 필요할 때마다 목적지 호스트의 하드웨어 주소를 찾는 역할

- 전송 계층: 응용 계층으로부터 받은 데이터를 세그먼트 형태로 만들어 네트워크를 통해 수신자에게 전달하는 역할

  - TCP: 연결 지향 전송 프로토콜로 세그먼트가 수신자에게 전달되었는지 ack를 주고받음으로써 점검
  - UDP: 비연결 전송 프로토콜로 세그먼트를 보내기만 하고 ack를 주고받지 않음

- 응용 계층: 네트워크로 연결된 프로세스간의 통신 접속을 위해 설계된 통신 프로토콜을 위해 만들어진 추상 계층으로 사용자 프로그램에서 구현, 전송 계층 프로토콜을 사용하여 호스트 간의 연결을 확립하는 역할

  HTTP, FTP, SMTP, IMAP, POP3 등

<br>

### OSI 7-Layer

각 계층은 하위 계층의 기능만을 이용하고 상위 계층에게 기능 제공

1. 물리 계층

   실제 장치들을 연결하기 위한 기계적인 항목과 전기적인 항목에 대한 특성을 규정

   상위 계층에서 전송된 데이터를 물리적인 전송 매체를 통해 비트 형채로 전송

   허브, 리피터 등

2. 데이터링크 계층

   네트워크 계층에서 받은 데이터를 프레임이라는 논리적인 단위로 구성하고 필요한 정보를 덧붙여 물리 계층으로 전달

   브리지, 스위치 등

3. 네트워크 계층

   데이터를 패킷 단위로 분할하여 전송하며 데이터 전송과 경로 선택에 관한 서비스 제공

   라우터

4. 전송 계층

   데이터 전송에 관한 서비스를 제공하는 계층(전체 메시지의 전송을 책임짐)

   계층 4까지의 기능은 운영체제에서 시스템 콜 형태로 상위 계층에 제공

5. 세션 계층

   응용 프로그램 간의 통신을 관리하기 위한 방법과 동기화를 유지하는 서비스를 제공

   데이터 전송 중 오류가 발생할 경우 재전송하거나 복구 가능

6. 표현 계층

   전송하는 데이터의 표현 방식에 관한 서비스 제공

   송신자와 수신자가 서로 다른 표현 방식을 사용하는 경우 코드와 문자 등을 번역하여 전송 데이터를 일관되게 이해할 수 있도록 하는 기능 제공

7. 응용 계층

   응용 프로그램과 연계하여 사용자에게 편리한 환경을 제공하는 역할 수행

<br>

### 프로토콜 데이터 단위

- PDU(Protocol Data Unit): 프로토콜 데이터 단위

  계층화된 구조에서 같은 계층에 존재하는 두 통신 개체 간에 서로 주고받는 헤더 및 데이터가 합쳐진 캡슐화된 운반체(프레임, 패킷, 세그먼트 등)

  PCI(Protocol Control Unit)와 SDU(Service Data Unit)으로 구성

  PCI: 헤더 정보를 의미하는 발신지 주소, 수신지 주소, 순서 번호, 오류 검출용 FCS 등을 포함

  FCS(Frame Check Sequence): 프레임 끝부분에 수신 측의 에러 검출을 돕기 뒤에 삽입하는 필드로 CRC 에러 검출 기법에 의해 생성된 비트 배열이 포함

  SDU: 실제 사용자 정보

- SDU: 서비스 데이터 단위

  상/하향 두 통신 계층 간에 전달되는 실제 정보

<br>

### 프로토콜 번호

전송 프로토콜에 대한 정보로 번호를 가용하여 데이터그램 헤더 안에 적어서 보냄

‘/etc/protocols’에서 확인 가능

<br>

### 포트 번호

IP 프로토콜에 의해 전달된 데이터는 TCP/UDP 등에서 서비스 다중화를 위해 포트로 관리됨

0번부터 65535번까지 사용됨

0번부터 1023번까지는 주요 프로토콜이 할당받아 주로 시스템에서 사용

‘/etc/services’에서 주요 포트 번호 확인 가능

- 20: FTP 전송
- 21: FTP 제어
- 22: SSH
- 23: Telnet
- 25: SMTP
- 53: DNS
- 80: HTTP
- 110: POP3
- 143: IMAP
- 161: SNMP
- 443: HTTPS

<br>

### 소켓(Socket)

네트워크로 연결되어 있는 컴퓨터에서 상호 간 통신을 위한 접점

인터넷 프로토콜, 로컬 시스템의 IP 주소 및 포트 번호, 원격 시스템의 IP 주소 및 포트 번호로 구성

라우팅 프로토콜: 라우터 간 통신 방식을 규정하는 통신 규약으로 라우팅할 때 필요한 주변 라우터의 정보 포함 (OSFP, RIP, BGP 등)

라우트된 프로토콜: 응용 프로그램 트래픽을 전달할 때 사용 (IP, IPX 등)

<br>

## 3.1.4 IP 주소와 도메인

### IP 주소

인터넷에서 다른 컴퓨터와 서로 인식하고 통신하기 위해 사용되는 특수한 번호로 각 컴퓨터마다 고유한 값으로 제공됨

IPv4는 32비트의 이진 숫자로 수성되어 있고 8비트씩 4부분으로 나누어 십진수로 표현(0.0.0.0~255.255.255.255)

첫 번째 8비트 영역의 값에 따라 A~E 클래스로 나누는데 A~C는 일반적인 목적으로 사용하고 D, E는 특수 목적으로 사용됨

클래스 A, B, C는 주소를 네트워크 식별자와 호스트 식별자로 구분해 관리함으로써 클래스별로 네트워크 크기에 따라 주소 관리를 다르게 함

네트워크 식별자: NIC에서 할당하는 주소

호스트 식별자: 개별 네트워크 관리자가 할당하는 주소

<br>

### IP 주소의 클래스

- A 클래스(N.H.H.H)

  IP 주소 첫 번째 부분의 1bit가 0이며 네트워크 아이디는 0~127까지 사용 (0.0.0.0~127.255.255.255)

  0과 17은 각각 자체 네트워크 용도와 루프백 네트워크 주소를 나타내는 특수 용도로 예약되어 있음

- B 클래스(N.N.H.H)

  IP 주소 첫 번째 부분의 2bit가 10이며 네트워크 아이디는 128.0~191.255까지 사용

- C 클래스(N.N.N.H)

  IP 주소 첫 번째 부분의 3bit가 110이며 네트워크 아이디는 192.0.0~223.255.255까지 사용

- D 클래스

  IP 주소 첫 번째 부분의 4bit가 1110이며 다중 방송 통신용으로 예약되어 있음

- E 클래스

  IP 주소 첫 번째 부분의 4bit가 1111이며 연구용으로 예약되어 있음

  D 클래스로 묶어 통칭하기도 함

<br>

### 특수 목적 IP 주소

- 사설 IP 주소: A 클래스에 1개 네트워크, B 클래스에 16개 네트워크, C 클래스에 256개의 네트워크 대역
- 루프백 네트워크: A 클래스의 127 대역(127.0.0.0~127.255.255.255)

<br>

### 도메인 네임

숫자로 표현된 IP 주소를 영문으로 표현한 것

<br>

### 도메인 네임 시스템(DNS)

인터넷 상에서 컴퓨터 이름에 대한 주소 매핑 서비스 제공

<br>

### 도메인 체계

도메인은 루트 도메인 아래에 역트리 형태의 계층적 구조로 구성되어 있음

1. 루트 도메인
2. 최상위 도메인
   1. 일반 최상위 도메인: com, net, org 등
   2. 국가 코드 최상위 도메인: kr, us, cn 등
3. 2단계 도메인, 3단계 도메인…

<br>

### ICANN(Internet Corporation for Assigned Names and Numbers)

인터넷 도메인 관리와 정책을 결정하는 국제 기구

<br>

### IPv6

IPv4의 주소 고갈 문제 해결을 위해 제안된 차세대 인터넷 프로토콜

주소 범위는 128비트이고 주소 표현은 16비트 단위로 하여 8자리로 나타냄, 각 자리는 :으로 구분하고 16진수 값으로 표기

IPv6의 특징

- IP 주소의 확장
- 패킷 크기의 확장
- 호스트 주소 자동 설정
- 헤더 구조 단순화
- 흐름 제어 기능 지원
- 인증 및 보안 기능
- 이동성

<br>

# 3.2 네트워크 환경

## 3.2.1 환경 설정

### 리눅스 네트워크의 개요

리눅스에서 네트워크 서비스를 사용하려면 네트워크 하드웨어를 설치해야 하고 네트워크 프로토콜, 네트워크 서비스 프로그램 순으로 설치해야 함

리눅스에서 지원하는 네트워크 하드웨어

- lo: 로컬 루프백을 나타내는 장치로 물리적으로 존재하는 인터페이스가 아니라 가상으로 만들어진 네트워크 인터페이스 장치
- ethx: CentOS 6 이전 버전에서 사용되었던 이더넷 카드 인터페이스 장치
- enpx: CentOS 7부터 사용되는 이더넷 카드 인터페이스 장치
- dlx: 패러럴 포트로 구동되는 D-Link DE-600 포켓 어댑터 장치
- slx: SLIP 인터페이스 장치
- pppx: 모뎀을 사용해서 네트워크를 사용할 경우에 설정되는 PPP 장치
- plipx: 패러럴 케이블을 사용하는 패러럴 라인 인터페이스 장치
- trx: 토큰링을 사용할 경우에 설정되는 네트워크 장치
- fddix: FDDI 인터페이스를 사용할 경우에 설정되는 네트워크 장치
- virbr0: 서버 가상화를 사용할 경우에 가상 머신의 NAT 설정에 사용되는 네트워크 장치
- xenbr0: xen 기반 서버 가상화를 사용할 경우에 설정되는 네트워크 장치
- docker0: Docker 기반의 서버 가상화를 사용할 경우에 설정되는 네트워크 장치



### 인터넷 접속을 위한 설정

- 넷마스크: 서브넷 마스크라고도 불리며 네트워크를 분할하여 새로운 하위 네트워크 구성 시 사용됨

  | 서브넷 마스크   | 서브넷 마스크의 비트 표시           | 네트워크 접두어 |
  | --------------- | ----------------------------------- | --------------- |
  | 255.0.0.0       | 11111111 00000000 00000000 00000000 | /8              |
  | 255.255.0.0     | 11111111 11111111 00000000 00000000 | /16             |
  | 255.255.255.0   | 11111111 11111111 11111111 00000000 | /24             |
  | 255.255.255.128 | 11111111 11111111 11111111 10000000 | /25             |
  | 255.255.255.192 | 11111111 11111111 11111111 11000000 | /26             |
  | 255.255.255.224 | 11111111 11111111 11111111 11100000 | /27             |
  | 255.255.255.240 | 11111111 11111111 11111111 11110000 | /28             |
  | 255.255.255.248 | 11111111 11111111 11111111 11111000 | /29             |
  | 255.255.255.252 | 11111111 11111111 11111111 11111100 | /30             |
  | 255.255.255.254 | 11111111 11111111 11111111 11111110 | /31             |
  | 255.255.255.255 | 11111111 11111111 11111111 11111111 | /32             |

  | 클래스 | 주소값        | 호스트 개수 |
  | ------ | ------------- | ----------- |
  | A      | 255.0.0.0     | 16777216    |
  | B      | 255.255.0.0   | 65536       |
  | C      | 255.255.255.0 | 256         |

  ex. IP 주소: 192.168.3.12, 넷마스크: 255.255.255.0(192.168.3.12/24)라면 192.168.3.0~192.168.3.255까지 총 256개의 호스트를 하나의 네트워크로 묶음

  이 중 두 개 주소는 네트워크 주소와 브로드캐스트 주소가 됨

  - 네트워크 주소: 해당 네트워크를 대표하는 주소로 방화벽이나 응용 프로그램에서 해당 네트워크에 속한 호스트의 접근을 허가/거부할 때 사용하는 주소 (가장 최하위 값인 0이 할당됨)
  - 브로드캐스트 주소: 해당 네트워크 대역에 속한 모든 호스트들에게 메시지를 전달할 때 사용하는 주소 (가장 최상위 값인 255가 할당됨

- 게이트웨이: 서로 다른 통신망이나 프로토콜을 사용하는 네트워크 간의 통신을 가능하게 하는 컴퓨터나 소프트웨어 (주로 1번이나 254번이 할당됨)

<br>

### 네트워크 인터페이스 설정 방법

- 명령어

  ```bash
  ifconfig eth0 [IP 주소] netmask [넷마스크 주소] up
  route add -net [네트워크 주소] netmask [넷마스크 주소] eth0
  route add default gw [게이트웨이 주소]
  ```

- 네트워크 관련 파일: `/etc/sysconfig/network-scripts/ifcfg-네트워크장치이름` 폴더에 관련 정보가 저장됨

  해당 파일 수정 후 다음 명령어로 네트워크 데몬을 재시작해야 정보가 갱신됨

  ```bash
  systemctl restart network
  
  # CentOS 6 이전
  service network restart
  ```

<br>

## 3.2.2 네트워크 관련 명령어

### ip

이더넷 장치, IP 주소, 라우팅 정보 등의 설정 정보를 출력하거나 변경하는 명령

```bash
ip [options] 대상 [command]

## 주요 대상 ##
# address: IPv4 또는 IPv6 주소
# route: 라우팅 테이블 목록
# link: 네트워크 장치
# => 해당 대상들에 대한 약어 지원

## 주요 command ##
# show, list: 대상에 대한 정보를 출력 (default)
# add: 대상에 대한 특정 정보를 추가하거나 설정함
# delete, del: 대상에 대한 특정 정보 삭제
# set: 지정한 네트워크 인터페이스 상태 변경
```

<br>

### ifconfig(interface config)

네트워크 인터페이스를 설정/확인하는 명령으로 IP 주소, 넷마스크 주소, MAC 주소 등을 설정하고 확인 가능 (ip 명령으로 대체됨)

```bash
ifconfig [interface] [address] [option]
```

<br>

ifconfig의 주요 항목

| 항목       | 설명                                                         |
| ---------- | ------------------------------------------------------------ |
| flags      | 네트워크 인터페이스의 상태 정보<br />\- UP: 인터페이스가 활성화되어 있음 <br />- BROADCAST: 브로드캐스트를 사용함 <br />- RUNNING: 인터페이스가 동작 중 <br />- MULTICAST: 멀티캐스트 사용 |
| mtu        | 한 번에 전송할 수 있는 최대 패킷의 크기                      |
| inet       | IPv4 주소                                                    |
| netmast    | 넷마스크 주소                                                |
| broadcast  | 브로드캐스트 주소                                            |
| inet6      | IPv6 주소                                                    |
| ether      | MAC 주소                                                     |
| RX/TX      | 수신 패킷수와 전송 패킷 관련 수                              |
| collisions | 충돌이 발생한 패킷 수                                        |

<br>

### route

라우팅 테이블의 정보를 출력하거나 관리하는 명령으로 네트워크 주소, 게이트웨이 주소를 확인하거나 설정할 때 사용 (ip 명령으로 대체됨)

```bash
route [add|del] [-destination] [netmask 값] [gw 값] [dev 인터페이스]
```

<br>

route의 항목

| 항목        | 설명                                                         |
| ----------- | ------------------------------------------------------------ |
| Destination | 목적지의 네트워크 주소<br />default의 경우 목적지 네트워크로등록되지 않은 모든 네트워크 주소를 처리 |
| Gateway     | 목적지 주소로 보내기 위한 게이트웨이 주소<br />목적지가 자신의 네트워크 인터페이스와 직접 연결되어 있으면 *로 표시되고 그렇지 않으면 게이트웨이의 IP 주소가 입력됨 |
| Genmask     | 목적지의 네트워크 주소를 알아내기 위한 넷마스크<br />IP 주소에 Netmask를 AND 연산자로 계산하면 목적지의 네트워크 주소를 알 수 있음 |
| Flags       | 목적지 네트워크와의 연결 상태<br />- U: 인터페이스가 사용되고 있음 <br />- G: 라우트가 게이트웨이로 사용되고 있음 <br />- H: 오직 단독 호스트만이 라우트를 거쳐 접근할 수 있음, 이 경우 루프백 엔트리는 127.0.0.1이 됨 <br />- D: 테이블 엔트리가 설정된 경우 ICMP 리다이렉트 메시지로 운영 <br />- M: 테이블 엔트리가 설정된 경우 ICMP 리다이렉트 메시지에 의해 수정되고 있음 |
| Metric      | 목적지 네트워크와의 거리(라우터를 하나 거칠 때마다 1씩 증가) |
| Ref         | 다른 라우터가 목적지로 가기 위해 참조한 횟수                 |
| Use         | 다른 라우터가 목적지로 가기 위해 사용한 횟수                 |
| Iface       | 목적지 네트워크와 연결된 인터페이스                          |

<br>

### netstat

네트워크의 연결 상태를 출력하는 명령

```bash
netstat [option] [address_family_option]

## 주요 옵션 ##
# -a: 모든 소켓 정보 출력
# -n: 기호화된 호스트명이나 포트명 대신 숫자값으로 표시
# -p: 소켓에 대한 PID와 프로그램명 출력
# -r: 라우팅 테이블 정보 출력
# -l: 대기하고 있는 포트인 Listen 포트 출력
# -i: 네트워크 인터페이스 테이블 정보 출력
# -s: 네트워크 프로토콜에 대한 통계 정보 출력
# -c: 네트워크 정보를 계속적으로 출력
# -t: TCP 프로토콜 기반으로 접속한 목록 출력
# -u: UDP 프로토콜 기반으로 접속한 목록 출력
# -g: 멀티캐스트 그룹 멤버의 정보 출력

## address family option ##
# --protocol=값: 특정 프로토콜과 연관된 정보 출력
# --inet, --ip: --protocol=inet과 같은 결과로 IP 주소 기반으로 연결된 정보 출력
# --unix: --protocol=unix과 같은 결과로 UNIX Domain Socket에 대한 정보 출력(해당 소켓은 운영체제에서 실행되는 프로세스 간의 데이터 교환을 하기 위해 사용되는 통신 연결 포인트)
```

<br>

netstat의 State 결과

| 값           | 내용                                                         |
| ------------ | ------------------------------------------------------------ |
| LISTEN       | 서버에서 클라이언트로부터 들어오는 패킷을 위해 소켓을 열고 기다리는 상태 |
| SYS-SENT     | 로컬 시스템의 클라이언트 애플리케이션이 원격 호스트에 연결을 요청한 상태 |
| SYN_RECEIVED | 서버 시스템이 원격 클라이언트로부터 접속 요구를 받아 클라이언트에게 응답을 하였지만 아직 클라이언트에세 확인 메시지를 받지 못한 상태 |
| ESTABLISHED  | 3Way-Handshaking이 완료된 후 서버와 클라이언트가 서로 연결된 상태 |
| FIN-WAIT1    | 소켓이 닫히고 연결이 종료되는 상태                           |
| FIN-WAIT2    | 연결은 종료되었고 소켓이 원격 호스트로부터 종료되었다는 정보를 기다리는 상태 |
| CLOSE-WAIT   | 원격 호스트는 종료된 상태이고 소켓을 종료하기 위해 기다리는 상태 |
| CLOSING      | 확인 메시지가 전송 도중 분실된 상태                          |
| TIME-WAIT    | 패킷 처리는 끝났지만 분실되었을지 모를 느린 세그먼트를 위해 당분간 소켓을 열어 놓은 상태 |
| CLOSED       | 소켓 연결이 종료된 상태                                      |
| LASK_ACK     | 원격 호스트가 종료되고 소켓도 닫힌 상태에서 마지막 ACK 패킷을 기다리는 상태 |
| UNKNOWN      | 소켓 상태를 확인할 수 없는 상태                              |

<br>

### ss(socket statistics)

소켓 상태를 출력해주는 명령으로 netstat 명령과 유사

```bash
ss [option] [필터] # 필터는 'state TCP-상태값 표현식' 형태로 사용 가능

## 주요 옵션 ##
# -a: 소켓의 모든 정보 출력
# -n: 서비스명으로 리졸빙하지 않고 숫자 값으로 출력
# -r: 숫자값 형태의 주소나 포트 정보를 호스트명이나 서비스명으로 리졸빙해서 출력
# -l: 서비스 연결을 위해 대기 중인 소켓 정보를 출력
# -o: 시간 관련 정보를 출력
# -e: 소켓 정보를 확장해서 자세히 출력
# -p: 소켓을 사용 중인 프로세스 정보 출력
# -i: 시스템 내부의 TCP 정보 출력
# -s: 소켓 관련 상태 정보를 요약해 출력
# -4: IPv4 관련 정보만 출력
# -6: IPv6 관련 정보만 출력
# -0: PACKET 소켓 정보 출력
# -t: TCP 관련 소켓 정보만 출력
# -u: UDP 관련 소켓 정보만 출력
# -x: 유닉스 도메인 소켓 정보만 출력
# -f 패밀리명: 소켓의 특정 타입을 지정해 출력
```

<br>

### arp

ARP 캐시를 관리하는 명령

ARP 캐시: 현재 접속되어 있는 32비트 IP 주소를 하드웨어 주소로 바꾸어 기억하는 곳으로 ARP 캐스를 확인하면 현재 들어와있는 호스트에 대한 정보를 알 수 있음

```bash
arp [option]

## 주요 옵션 ##
# -a: ARP 캐시에 기록된 정보 중 특정 호스트에 대한 정보 출력
# -d: ARP 캐시에서 해당 호스트 정보 제거
# -n: 출력 정보를 도메인 주소 대신 IP 주소로 출력
# -v: 관련 정보 자세히 출력
```

<br>

### mii-tool

네트워크 인터페이스의 상태를 점검/설정하는 유틸리티

```bash
mii-tool [option] 네트워크_장치명

## 주요 옵션 ##
# -r: 네트워크 인터페이스 자동 인식을 위해 재시작
# -F: 강제로 설정
# -v: 관련 정보를 자세히 출력
```

<br>

### ethtool

이더넷 카드 설정 정보를 출력하거나 변경하는 명령

```bash
ethtool 네트워크_장치명

## 주요 옵션 ##
# -s: 이더넷 카드 설정 변경 시 사용
```

<br>

### ping

ICMP를 이용하여 네트워크 연결을 확인할 수 있는 명령

```bash
ping [option] Hostname 또는 IP_Address

## 주요 옵션 ##
# -c 개수: 몇 개의 패킷을 보낼 것인지 설정, 기본적으로 무한개 전송
# -i 초: 몇 초 간격으로 패킷을 보낼지 설정, 기본값은 1초
# -s 패킷크기: 전송하는 패킷의 크기를 byte 단위로 설정, 기본값은 56bytes (헤더 데이터인 8bytes를 합쳐 64bytes 패킷을 보냄)
# -w 초: 패킷을 보내고 몇 초 후 실행을 멈출 것인지 설정 (-c 옵션과 동시에 사용하는 경우 먼저 끝나는 값 반영)
```

ttl: time to live로 패킷이 진행할 수 있는 라우팅 최댓값

<br>

### traceroute

패킷이 특정 호스트까지 라우팅되는 과정을 출력하는 명령

라우팅 과정에 장애가 있을 경우 위치 파악 가능

```bash
traceroute Hostname 또는 IP_Address
```

<br>

### nslookup

DNS를 이용하여 도메인이나 IP를 조회하는 명령

```bash
nslook [option] Hostname 또는 IP_Adress

## 주요 옵션 ##
# -type='서버타입': 서버타입에는 mx, ns 등을 조회 가능
```

<br>

### dig

도메인명으로 정보를 조회하는 명령

```bash
dig [option] 도메인명 [type] # type에는 DNS 서버 설정에 사용하는 값을 지정할 수 있고 -t 옵션과 같음

## 주요 옵션 ##
# -t: 질의 타입을 지정하는 옵션, 기본값은 IP를 조회하는 A
```

<br>

### host

도메인명으로 정보를 조회하는 명령

```bash
host [option] 도메인명

## 주요 옵션 ##
# -t: 질의 타입을 지정하는 옵션, 기본값은 IP를 조회하는 A
# -v: 지정한 도메인에 대한 자세한 정보 출력
# -a: -v와 같지만 MX, NS 등의 타입값 위주로 출력
```

<br>

### hostname

시스템에 설정된 호스트네임을 출력하거나 설정

```bash
hostname [option] [hostname]

## 주요 옵션 ##
# -v: 자세한 호스트명 정보 출력
# -d: 도메인명만 출력
# -f: 완전한 호스트명 출력
# -a: 호스트명에 대한 Alias 명 출력
# -i: 호스트명에 설정된 IP 주소 출력
```

<br>

### whois

등록된 도메인에 대한 정보 확인 명령

```bash
whois [option] URL

## 주요 옵션 ##
# -h: 지정한 DNS 서버에서 관련 정보를 조회해 출력
```

<br>

### wget

웹 URL을 이용해 다운로드 시 사용하는 명령어

```bash
wget [option] URL

## 주요 옵션 ##
# -r: 하위 디렉터리까지 다운로드할 때 사용하는 옵션, 기본 depth는 5
# -l: 하위 디렉터리의 depth 레벨을 지정할 때 사용
```

<br>

### 네트워크 관련 파일 및 디렉터리

- /etc/sysconfig/network-scripts: 네트워크 인터페이스 환경 설정과 관련된 파일 및 스크립트가 저장되는 곳
- /etc/resolv.conf: 시스템에서 사용하는 네임서버를 설정하는 파일
- /etc/hosts: DNS 서버를 사용하기 이전에 많이 이용된 파일로 IP 주소와 호스트명을 매핑시켜 데이터베이스처럼 사용하는 파일